CREATE DATABASE IF NOT EXISTS HIBERNATESAMPLE;
USE HIBERNATESAMPLE;

DROP TABLE IF EXISTS EMPLOYEE;
DROP TABLE IF EXISTS DEPARTMENT;
DROP TABLE IF EXISTS BOOKISBN;
DROP TABLE IF EXISTS ORDERDETAIL1;
DROP TABLE IF EXISTS ORDERDETAIL2;
DROP TABLE IF EXISTS BOOK;
DROP TABLE IF EXISTS ORDERMASTER;
DROP TABLE IF EXISTS LIKERECORD;
DROP TABLE IF EXISTS MEMBERSHIP;
DROP TABLE IF EXISTS ARTICLE;

CREATE TABLE DEPARTMENT
(
    DEPTNO INT NOT NULL,
    DNAME  VARCHAR(40),
    LOC    VARCHAR(40),
    CONSTRAINT DEPT_DEPTNO_PK PRIMARY KEY (DEPTNO)
);

INSERT INTO DEPARTMENT
VALUES (10, '財務部', '臺灣台北');
INSERT INTO DEPARTMENT
VALUES (20, '研發部', '臺灣新竹');
INSERT INTO DEPARTMENT
VALUES (30, '業務部', '美國紐約');
INSERT INTO DEPARTMENT
VALUES (40, '生管部', '中國上海');


CREATE TABLE EMPLOYEE
(
    EMPNO     INT NOT NULL AUTO_INCREMENT,
    ENAME     VARCHAR(30),
    JOB       VARCHAR(20),
    HIREDATE  DATE,
    SAL       DECIMAL(7, 2),
    COMM      DECIMAL(7, 2),
    EMPDEPTNO INT NOT NULL,
    CONSTRAINT EMP_DEPT_ID_FK FOREIGN KEY (EMPDEPTNO) REFERENCES DEPARTMENT (DEPTNO),
    CONSTRAINT EMP_ID_KEY PRIMARY KEY (EMPNO)
)
    AUTO_INCREMENT = 7001;

INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('KING', 'PRESIDENT', '1981-11-17', 5000.5, 0.0, 10);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('BLAKE', 'MANAGER', '1981-05-01', 2850, 0.0, 30);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('CLARK', 'MANAGER', '1981-01-09', 2450, 0.0, 10);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('JONES', 'MANAGER', '1981-04-02', 2975, 0.0, 20);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('MARTIN', 'SALESMAN', '1981-09-28', 1250, 1400, 30);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('ALLEN', 'SALESMAN', '1981-02-20', 1600, 300, 30);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('TURNER', 'SALESMAN', '1981-09-28', 1500, 0, 30);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('JAMES', 'CLERK', '1981-12-03', 950, 0.0, 30);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('WARD', 'SALESMAN', '1981-02-22', 1250, 500, 30);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('FORD', 'ANALYST', '1981-12-03', 3000, 0.0, 20);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('SMITH', 'CLERK', '1980-12-17', 800, 0.0, 20);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('SCOTT', 'ANALYST', '1981-12-09', 3000, 0.0, 20);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('ADAMS', 'CLERK', '1983-01-12', 1100, 0.0, 20);
INSERT INTO EMPLOYEE (ENAME, JOB, HIREDATE, SAL, COMM, EMPDEPTNO)
VALUES ('MILLER', 'CLERK', '1982-01-23', 1300, 0.0, 10);

CREATE TABLE BOOK
(
    ID      INT           NOT NULL AUTO_INCREMENT,
    NAME    VARCHAR(100)  NOT NULL,
    AUTHOR  VARCHAR(50)   NOT NULL,
    PRICE   DECIMAL(5, 1) NOT NULL,
    PICTURE LONGBLOB,
    `DESC`  LONGTEXT,
    CONSTRAINT BOOK_ID_PK PRIMARY KEY (ID)
);

INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('1984', 'Orwell, George', 277.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('The Stranger', 'Camus, Albert', 698.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('Lolita', 'Nabokov, Vladimir Vladimirovich', 441.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('為了N', '湊佳苗', 234.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('福爾摩斯探案全集', 'Arthur Conan Doyle', 1177.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('冰與火之歌第一部：權力遊戲上下冊套書', 'George R. R. Martin', 570.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('冰與火之歌第二部：烽火危城上下冊套書', 'George R. R. Martin', 570.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('冰與火之歌第三部：劍刃風暴套書（上中下，共三冊）', 'George R. R. Martin', 743.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('冰與火之歌第四部：群鴉盛宴套書（上中下，共三冊）', 'George R. R. Martin', 743.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('冰與火之歌第五部：與龍共舞套書（上中下，共三冊）', 'George R. R. Martin', 743.0);
INSERT INTO BOOK (NAME, AUTHOR, PRICE)
VALUES ('時間的女兒【經典新譯本】', 'Josephine Tey', 205.0);

CREATE TABLE BOOKISBN
(
    BID  INT PRIMARY KEY REFERENCES BOOK (ID),
    ISBN VARCHAR(20) NOT NULL
);

INSERT INTO BOOKISBN (BID, ISBN)
VALUES (1, '978-0451524935');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (2, '978-0679420262');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (3, '978-0679723165');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (4, '9789573328414');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (5, '9789578319219');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (6, '9789861856216');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (7, '9789861856469');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (8, '9789861858456');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (9, '9789861859828');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (10, '9789861859781');
INSERT INTO BOOKISBN (BID, ISBN)
VALUES (11, '9789865956950');

CREATE TABLE ORDERMASTER
(
    ID        INT NOT NULL AUTO_INCREMENT,
    UID       INT NOT NULL,
    ORDERTIME DATETIME DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT BOOK_ID_PK PRIMARY KEY (ID)
);

INSERT INTO ORDERMASTER (UID)
VALUES (1);
INSERT INTO ORDERMASTER (UID)
VALUES (2);
INSERT INTO ORDERMASTER (UID)
VALUES (3);
INSERT INTO ORDERMASTER (UID)
VALUES (4);

CREATE TABLE ORDERDETAIL1
(
    ID     INT NOT NULL AUTO_INCREMENT,
    OID    INT NOT NULL,
    BID    INT NOT NULL,
    AMOUNT INT NOT NULL,
    CONSTRAINT OID_ORDER_ID_FK1 FOREIGN KEY (OID) REFERENCES ORDERMASTER (ID),
    CONSTRAINT BID_BOOK_ID_FK1 FOREIGN KEY (BID) REFERENCES BOOK (ID),
    CONSTRAINT BOOK_ID_PK PRIMARY KEY (ID)
);

INSERT INTO ORDERDETAIL1 (OID, BID, AMOUNT)
VALUES (1, 3, 1);
INSERT INTO ORDERDETAIL1 (OID, BID, AMOUNT)
VALUES (1, 4, 1);
INSERT INTO ORDERDETAIL1 (OID, BID, AMOUNT)
VALUES (2, 2, 1);
INSERT INTO ORDERDETAIL1 (OID, BID, AMOUNT)
VALUES (3, 2, 2);
INSERT INTO ORDERDETAIL1 (OID, BID, AMOUNT)
VALUES (4, 7, 1);
INSERT INTO ORDERDETAIL1 (OID, BID, AMOUNT)
VALUES (4, 10, 1);
INSERT INTO ORDERDETAIL1 (OID, BID, AMOUNT)
VALUES (4, 8, 1);

CREATE TABLE ORDERDETAIL2
(
    OID    INT NOT NULL,
    BID    INT NOT NULL,
    AMOUNT INT NOT NULL,
    CONSTRAINT OID_ORDER_ID_FK2 FOREIGN KEY (OID) REFERENCES ORDERMASTER (ID),
    CONSTRAINT BID_BOOK_ID_FK2 FOREIGN KEY (BID) REFERENCES BOOK (ID),
    CONSTRAINT BOOK_ID_PK PRIMARY KEY (OID, BID)
);

CREATE TABLE MEMBERSHIP
(
    ID    INT NOT NULL AUTO_INCREMENT,
    NAME  VARCHAR(40),
    EMAIL VARCHAR(40),
    CONSTRAINT MEMBER_ID_PK PRIMARY KEY (ID)
);

INSERT INTO MEMBERSHIP (NAME, EMAIL)
VALUES ('David', 'david@gmail.com');
INSERT INTO MEMBERSHIP (NAME, EMAIL)
VALUES ('James', 'james@gmail.com');
INSERT INTO MEMBERSHIP (NAME, EMAIL)
VALUES ('Vincent', 'vincent@gmail.com');
INSERT INTO MEMBERSHIP (NAME, EMAIL)
VALUES ('Ron', 'ron@gmail.com');

CREATE TABLE ARTICLE
(
    ID      INT NOT NULL AUTO_INCREMENT,
    TITLE   VARCHAR(40),
    CONTENT VARCHAR(40),
    CONSTRAINT ARTICLE_ID_PK PRIMARY KEY (ID)
);

INSERT INTO ARTICLE (TITLE, CONTENT)
VALUES ('肚子好餓', '有沒有好吃的東西請大家推薦一下吧');
INSERT INTO ARTICLE (TITLE, CONTENT)
VALUES ('下雨天...', '不就是睡著天嗎？這絕對不是一篇廢文...');
INSERT INTO ARTICLE (TITLE, CONTENT)
VALUES ('上課好累QQ', '我沒力了...');
INSERT INTO ARTICLE (TITLE, CONTENT)
VALUES ('寫範例想情境頭好痛', '內容一定要滿300字嗎...我掰不出來了');

CREATE TABLE LIKERECORD
(
    MID INT NOT NULL,
    AID INT NOT NULL,
    CONSTRAINT MID_MEMBER_ID_FK FOREIGN KEY (MID) REFERENCES MEMBERSHIP (ID),
    CONSTRAINT AID_ARTICLE_ID_FK FOREIGN KEY (AID) REFERENCES ARTICLE (ID),
    CONSTRAINT LIKE_ID_PK PRIMARY KEY (MID, AID)
);

INSERT INTO LIKERECORD
VALUES (1, 3);
INSERT INTO LIKERECORD
VALUES (1, 4);
INSERT INTO LIKERECORD
VALUES (2, 1);
INSERT INTO LIKERECORD
VALUES (3, 2);
INSERT INTO LIKERECORD
VALUES (4, 1);
INSERT INTO LIKERECORD
VALUES (4, 3);
INSERT INTO LIKERECORD
VALUES (4, 4);

COMMIT;
